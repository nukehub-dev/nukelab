<nav class="navbar navbar-expand-sm bg-body-tertiary mb-4">
  <div class="container-fluid">
    {% block logo %}
      <span id="jupyterhub-logo" class="navbar-brand">
        <a href="{{ logo_url or base_url }}">
          <img src='{{ base_url }}logo'
               alt='NukeLab logo'
               class='jpy-logo'
               title='Home' />
        </a>
      </span>
    {% endblock logo %}
    {% if user %}
      <button class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#thenavbar"
              aria-controls="thenavbar"
              aria-expanded="false"
              aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    {% endif %}
    <div class="collapse navbar-collapse" id="thenavbar">
      <ul class="navbar-nav me-auto mb-0">
        {% if user %}
          {% block nav_bar_left_items %}
            <li class="nav-item">
              <a class="nav-link" href="{{ base_url }}home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ base_url }}token">Token</a>
            </li>
            {% if 'admin-ui' in parsed_scopes %}
              <li class="nav-item">
                <a class="nav-link" href="{{ base_url }}admin">Admin</a>
              </li>
            {% endif %}
            {% if services %}
              <li class="nav-item dropdown">
                <a href="#"
                   class="nav-link dropdown-toggle"
                   data-bs-toggle="dropdown"
                   role="button"
                   aria-expanded="false">Services</a>
                <ul class="dropdown-menu">
                  {% for service in services %}
                    {% block service scoped %}
                      <li>
                        <a class="dropdown-item" href="{{ service.href }}">{{ service.name }}</a>
                      </li>
                    {% endblock service %}
                  {% endfor %}
                </ul>
              </li>
            {% endif %}
          {% endblock nav_bar_left_items %}
        {% endif %}
      </ul>
      <ul class="nav navbar-nav me-2">
        {% block nav_bar_right_items %}
          <li class="nav-item">
            {% block theme_toggle %}
              <button class="btn btn-sm"
                      id="dark-theme-toggle"
                      aria-label="Toggle dark mode"
                      title="Toggle dark mode">
                <i aria-hidden="true" class="fa fa-circle-half-stroke"></i>
              </button>
            {% endblock theme_toggle %}
          </li>
          <li class="nav-item">
            {% block login_widget %}
              <span id="login_widget">
                {% if user %}
                  <span class="me-1">{{ user.name }}</span>
                  <a id="logout"
                     role="button"
                     class="btn btn-sm btn-outline-contrast"
                     href="{{ logout_url }}"> <i aria-hidden="true" class="fa fa-sign-out"></i> Logout</a>
                {% else %}
                  {% if template != 'login.html' %}
                    <a id="login"
                       role="button"
                       class="btn btn-sm btn-outline-contrast"
                       href="{{ login_url }}">Login</a>
                  {% endif %}
                {% endif %}
              </span>
            {% endblock login_widget %}
          </li>
        {% endblock nav_bar_right_items %}
      </ul>
    </div>
    {% block header %}
    {% endblock header %}
  </div>
</nav>